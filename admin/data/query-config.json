{
  "customer_documents": {
    "description": "Lista documenti cliente con raggruppamento",
    "sql": "SELECT id, tipo_documento, numero, DATE_FORMAT(data, '%Y-%m-%d') as data, YEAR(data) as anno, MONTH(data) as mese, totale, stato, valuta, descrizione FROM documenti WHERE cod_cliente = :clientCode AND data >= :dateFrom AND data <= :dateTo ORDER BY data DESC LIMIT :limit OFFSET :offset",
    "params": {
      "clientCode": {
        "type": "string",
        "required": true
      },
      "dateFrom": {
        "type": "date",
        "required": false,
        "default": "1970-01-01"
      },
      "dateTo": {
        "type": "date",
        "required": false,
        "default": "2099-12-31"
      },
      "limit": {
        "type": "int",
        "required": false,
        "default": 100
      },
      "offset": {
        "type": "int",
        "required": false,
        "default": 0
      }
    }
  },
  "document_types_list": {
    "description": "Tipi documento disponibili per filtro dropdown",
    "sql": "SELECT DISTINCT tipo_documento FROM documenti WHERE cod_cliente = :clientCode ORDER BY tipo_documento",
    "params": {
      "clientCode": {
        "type": "string",
        "required": true
      }
    }
  },
  "document_years_list": {
    "description": "Anni con documenti disponibili",
    "sql": "SELECT DISTINCT YEAR(data) as anno FROM documenti WHERE cod_cliente = :clientCode ORDER BY anno DESC",
    "params": {
      "clientCode": {
        "type": "string",
        "required": true
      }
    }
  },
  "document_detail": {
    "description": "Dettaglio singolo documento con righe",
    "sql": "SELECT d.*, GROUP_CONCAT(r.descrizione SEPARATOR ', ') as righe FROM documenti d LEFT JOIN righe_documento r ON d.id = r.id_documento WHERE d.cod_cliente = :clientCode AND d.id = :docId GROUP BY d.id",
    "params": {
      "clientCode": {
        "type": "string",
        "required": true
      },
      "docId": {
        "type": "int",
        "required": true
      }
    }
  },
  "document_count": {
    "description": "Conta totale documenti cliente",
    "sql": "SELECT COUNT(*) as total FROM documenti WHERE cod_cliente = :clientCode",
    "params": {
      "clientCode": {
        "type": "string",
        "required": true
      }
    }
  }
}
